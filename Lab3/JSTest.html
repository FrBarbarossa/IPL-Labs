<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta lang="ru">
    <title>Третья ЛР</title>
    <script>
        function insert_data() {
            var str = ''
            var result = document.getElementById('result');

            function print_all(el, s) {
                if (el.tagName){
                    str += s + el.tagName + '<br>';}
                // alert(str)
                if (el.childNodes.length == 0)
                {
                    console.log('Last child of ' + el.tagName)
                    return;
                }
                else
                    for (var i = 0; i < el.childNodes.length; i++)
                        print_all(el.childNodes[i], s + '&nbsp;');
            }

            print_all(document.body, '')
            result.innerHTML = "<hr/><p>" + Date() + "</p>" +
                "&lt;" + str + "&gt;"+"<hr/>";
        }


        insert_data(str)
    </script>
</head>

<body>
    <div>Просто текст</div>
    <div>
        <div>
            <p>Переход на уровень 2</p>
            <div>
                <p>Переход на уровень 3.1</p>
            </div>
            <div>
                <p>Переход на уровень 3.2</p>
            </div>
        </div>
        <div>
            <p>Переход на уровень 2.2</p>
            <table class='table' width="25%" border="2">
                <tr>
                    <th colspan="2">Вторник</th>
                </tr>
                <tr>
                    <th width="25%">Время</th>
                    <th width="50%">Предмет</th>
                </tr>
                <tr>
                    <td bgcolor="#ff00ff">8.30</td>
                    <td rowspan="2">
                        <Физика (лек)<br>
                            <small>323</small>
                    </td>
                </tr>
                <tr>
                    <td>10.05</td>
                </tr>
                <tr>
                    <td>10.15</td>
                    <td rowspan="2">Электротехника (сем)<br><small>520</small></td>
                </tr>
                <tr>
                    <td>11.50</td>
                </tr>
                <tr>
                    <td>12.20</td>
                    <td rowspan="2">ЭК ФКиС<br><small>СК</small></td>
                </tr>
                <tr>
                    <td>13.25</td>
                </tr>
            </table>
        </div>
    </div>
    <div>
        <button onclick="insert_data()">ЖМАК</button>
        <p>Вывод страницы:</p>
        <div id="result"></div>
    </div>
</body>

</html>